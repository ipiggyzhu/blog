---
date: 2025-09-28 02:10:47
title: Shell脚本集合
article: false
top: false
categories:
  - 专题
tags:
  - Shell
  - Linux
  - 自动化
coverImg: /img/nav/脚本.svg
permalink: /zhuanti/shell-scripts
homeCardSort:
description: Shell脚本是Linux/Unix系统管理员的利器，让繁琐的运维工作自动化
---

<div class="shell-scripts-page">

# 🐚 Shell脚本集合

> 💡 Shell脚本是Linux/Unix系统管理员的利器，让繁琐的运维工作自动化

---

## 🔧 系统监控脚本

<div class="script-category">
  <div class="script-item">
    <div class="script-header">
      <h3>🖥️ 服务器性能监控</h3>
      <span class="script-tag">监控</span>
    </div>
    <div class="script-content">
      <p>实时监控CPU、内存、磁盘使用率，超出阈值自动告警</p>
      <div class="script-code">
        <pre><code>#!/bin/bash
# 性能监控脚本
CPU_THRESHOLD=80
MEM_THRESHOLD=85

cpu_usage=$(top -bn1 | grep "Cpu(s)" | awk '{print $2}' | cut -d'%' -f1)
mem_usage=$(free | grep Mem | awk '{printf("%.2f", $3/$2 * 100.0)}')

if (( $(echo "$cpu_usage > $CPU_THRESHOLD" | bc -l) )); then
    echo "警告: CPU使用率过高 ($cpu_usage%)"
fi</code></pre>
      </div>
      <div class="script-meta">
        <span>📅 2024-03-20</span>
        <span>⭐ 高频使用</span>
        <span>🔄 自动告警</span>
      </div>
    </div>
  </div>

  <div class="script-item">
    <div class="script-header">
      <h3>📊 系统状态检查</h3>
      <span class="script-tag">检查</span>
    </div>
    <div class="script-content">
      <p>全面检查系统状态，包括服务、端口、磁盘空间等</p>
      <div class="script-code">
        <pre><code>#!/bin/bash
# 系统状态检查脚本
echo "=== 系统状态检查报告 ==="
echo "时间: $(date)"
echo "主机名: $(hostname)"
echo "运行时间: $(uptime)"
echo "磁盘使用情况:"
df -h | grep -E '^/dev/'
echo "内存使用情况:"
free -h</code></pre>
      </div>
      <div class="script-meta">
        <span>📅 2024-03-15</span>
        <span>⭐ 常用工具</span>
        <span>📋 状态报告</span>
      </div>
    </div>
  </div>
</div>

---

## 🗂️ 文件管理脚本

<div class="script-category">
  <div class="script-item">
    <div class="script-header">
      <h3>🗄️ 日志清理</h3>
      <span class="script-tag">清理</span>
    </div>
    <div class="script-content">
      <p>自动清理指定天数前的日志文件，释放磁盘空间</p>
      <div class="script-code">
        <pre><code>#!/bin/bash
# 日志清理脚本
LOG_DIR="/var/log"
DAYS=30

echo "清理 $DAYS 天前的日志文件..."
find $LOG_DIR -name "*.log" -type f -mtime +$DAYS -exec rm -f {} \;
find $LOG_DIR -name "*.log.*" -type f -mtime +$DAYS -exec rm -f {} \;
echo "日志清理完成"</code></pre>
      </div>
      <div class="script-meta">
        <span>📅 2024-03-10</span>
        <span>⭐ 定时任务</span>
        <span>🧹 空间清理</span>
      </div>
    </div>
  </div>

  <div class="script-item">
    <div class="script-header">
      <h3>💾 文件备份</h3>
      <span class="script-tag">备份</span>
    </div>
    <div class="script-content">
      <p>增量备份重要文件到远程服务器，支持压缩和加密</p>
      <div class="script-code">
        <pre><code>#!/bin/bash
# 文件备份脚本
SOURCE_DIR="/home/data"
BACKUP_DIR="/backup"
DATE=$(date +%Y%m%d_%H%M%S)

tar -czf "$BACKUP_DIR/backup_$DATE.tar.gz" "$SOURCE_DIR"
echo "备份完成: backup_$DATE.tar.gz"

# 同步到远程服务器
rsync -avz "$BACKUP_DIR/" user@remote:/backup/</code></pre>
      </div>
      <div class="script-meta">
        <span>📅 2024-03-05</span>
        <span>⭐ 数据安全</span>
        <span>🔄 增量备份</span>
      </div>
    </div>
  </div>
</div>

---

## 🚀 服务管理脚本

<div class="script-category">
  <div class="script-item">
    <div class="script-header">
      <h3>⚙️ 服务监控重启</h3>
      <span class="script-tag">服务</span>
    </div>
    <div class="script-content">
      <p>监控关键服务状态，自动重启异常服务</p>
      <div class="script-code">
        <pre><code>#!/bin/bash
# 服务监控脚本
SERVICES=("nginx" "mysql" "redis")

for service in "${SERVICES[@]}"; do
    if ! systemctl is-active --quiet $service; then
        echo "服务 $service 已停止，正在重启..."
        systemctl restart $service
        sleep 5
        if systemctl is-active --quiet $service; then
            echo "服务 $service 重启成功"
        else
            echo "服务 $service 重启失败，请手动检查"
        fi
    fi
done</code></pre>
      </div>
      <div class="script-meta">
        <span>📅 2024-03-18</span>
        <span>⭐ 高可用</span>
        <span>🔄 自动恢复</span>
      </div>
    </div>
  </div>
</div>

---

## 🌐 网络工具脚本

<div class="script-category">
  <div class="script-item">
    <div class="script-header">
      <h3>🔍 端口扫描</h3>
      <span class="script-tag">网络</span>
    </div>
    <div class="script-content">
      <p>扫描指定主机的开放端口，检查服务可用性</p>
      <div class="script-code">
        <pre><code>#!/bin/bash
# 端口扫描脚本
HOST=$1
PORTS=(22 80 443 3306 6379)

if [ -z "$HOST" ]; then
    echo "用法: $0 <主机地址>"
    exit 1
fi

echo "扫描主机: $HOST"
for port in "${PORTS[@]}"; do
    if timeout 3 bash -c "echo >/dev/tcp/$HOST/$port" 2>/dev/null; then
        echo "端口 $port: 开放"
    else
        echo "端口 $port: 关闭"
    fi
done</code></pre>
      </div>
      <div class="script-meta">
        <span>📅 2024-03-12</span>
        <span>⭐ 网络诊断</span>
        <span>🔍 安全检查</span>
      </div>
    </div>
  </div>
</div>

---

## 📈 Shell脚本统计

| 指标 | 数值 |
|------|------|
| 脚本总数 | 15+ |
| 分类数量 | 4个 |
| 更新频率 | 周更新 |
| 使用场景 | 运维自动化 |

---

## 💡 Shell编程技巧

<div class="tips-section">
  <div class="tip-item">
    <h4>🔧 变量与参数</h4>
    <ul>
      <li>使用 <code>${var}</code> 进行变量引用</li>
      <li>检查参数数量: <code>if [ $# -ne 2 ]</code></li>
      <li>设置默认值: <code>${var:-default}</code></li>
    </ul>
  </div>
  
  <div class="tip-item">
    <h4>🛡️ 错误处理</h4>
    <ul>
      <li>使用 <code>set -e</code> 遇错即停</li>
      <li>检查命令执行结果: <code>if [ $? -eq 0 ]</code></li>
      <li>日志记录: <code>echo "错误信息" >> error.log</code></li>
    </ul>
  </div>
  
  <div class="tip-item">
    <h4>⚡ 性能优化</h4>
    <ul>
      <li>避免频繁调用外部命令</li>
      <li>使用内置命令替代外部工具</li>
      <li>合理使用管道和重定向</li>
    </ul>
  </div>
</div>

---

> 🛠️ 好的Shell脚本不仅能解决问题，更应该具备可读性、可维护性和健壮性
</div>

<style>
.shell-scripts-page {
  max-width: 1000px;
  margin: 0 auto;
  padding: 0 20px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
}

.shell-scripts-page h1 {
  text-align: center;
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 1rem;
  font-size: 2.5rem;
  font-weight: 700;
}

.shell-scripts-page blockquote {
  text-align: center;
  font-style: italic;
  color: #6b7280;
  border-left: 4px solid #10b981;
  padding: 1rem 2rem;
  margin: 2rem auto;
  background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);
  border-radius: 8px;
  max-width: 600px;
}

/* 脚本分类 */
.script-category {
  display: grid;
  gap: 25px;
  margin: 2rem 0;
}

.script-item {
  background: linear-gradient(135deg, #fff 0%, #f0fdf4 100%);
  border-radius: 16px;
  padding: 30px;
  border: 1px solid rgba(16, 185, 129, 0.1);
  box-shadow: 0 8px 32px rgba(16, 185, 129, 0.1);
  transition: all 0.3s ease;
}

.script-item:hover {
  transform: translateY(-5px);
  box-shadow: 0 16px 48px rgba(16, 185, 129, 0.2);
}

.script-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
}

.script-header h3 {
  color: #374151;
  margin: 0;
  font-weight: 600;
}

.script-tag {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  color: white;
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
}

.script-content p {
  color: #6b7280;
  margin-bottom: 20px;
  line-height: 1.6;
}

.script-code {
  background: #1f2937;
  border-radius: 8px;
  margin: 15px 0;
  overflow-x: auto;
}

.script-code pre {
  margin: 0;
  padding: 20px;
  color: #e5e7eb;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 0.9rem;
  line-height: 1.5;
}

.script-code code {
  color: #e5e7eb;
}

.script-meta {
  display: flex;
  gap: 15px;
  color: #10b981;
  font-size: 0.9rem;
  font-weight: 500;
  flex-wrap: wrap;
}

/* 技巧部分 */
.tips-section {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 25px;
  margin: 2rem 0;
}

.tip-item {
  background: linear-gradient(135deg, #fff 0%, #f0fdf4 100%);
  border-radius: 12px;
  padding: 25px;
  border: 1px solid rgba(16, 185, 129, 0.1);
}

.tip-item h4 {
  color: #374151;
  margin-bottom: 1rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.tip-item ul {
  list-style: none;
  padding: 0;
}

.tip-item li {
  color: #6b7280;
  padding: 8px 0;
  border-bottom: 1px solid #e5e7eb;
  position: relative;
  padding-left: 20px;
}

.tip-item li:before {
  content: '▸';
  color: #10b981;
  font-weight: bold;
  position: absolute;
  left: 0;
}

.tip-item li:last-child {
  border-bottom: none;
}

.tip-item code {
  background: #f3f4f6;
  padding: 2px 6px;
  border-radius: 4px;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 0.85rem;
  color: #10b981;
}

/* 表格样式 */
.shell-scripts-page table {
  width: 100%;
  border-collapse: collapse;
  margin: 2rem 0;
  background: linear-gradient(135deg, #fff 0%, #f0fdf4 100%);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 4px 16px rgba(16, 185, 129, 0.1);
}

.shell-scripts-page th,
.shell-scripts-page td {
  padding: 15px;
  text-align: left;
  border-bottom: 1px solid #e5e7eb;
}

.shell-scripts-page th {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  color: white;
  font-weight: 600;
}

.shell-scripts-page tr:last-child td {
  border-bottom: none;
}

/* 响应式设计 */
@media (max-width: 768px) {
  .shell-scripts-page {
    padding: 0 15px;
  }
  
  .shell-scripts-page h1 {
    font-size: 2rem;
  }
  
  .script-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 10px;
  }
  
  .script-meta {
    flex-direction: column;
    gap: 8px;
  }
  
  .tips-section {
    grid-template-columns: 1fr;
  }
  
  .script-item,
  .tip-item {
    padding: 20px;
  }
  
  .script-code pre {
    padding: 15px;
    font-size: 0.8rem;
  }
}
</style>

